openapi: 3.0.0
info:
  title: Dokumentasi API Infotiket.in
  description: Infotiket.in adalah website penyedia pemesanan tiket pesawat terbang!
  version: 1.0.0
  contact:
    email: Infotiket.in@gmail.com
servers:
  - url: https://expressjs-develop-b4d1.up.railway.app/api/v1/
    description: URL Develop
  - url: http://localhost:3000/api/v1/
    description: URL localhost

paths:
  /auth/daftar-sekarang:
    post:
      tags:
        - "Autentikasi"
      summary: Mendaftarkan Pengguna Baru
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Mendaftar"

      responses:
        201:
          description: Sukses
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Akun berhasil dibuat. Silahkan periksa email Anda untuk verifikasi!
                  data:
                    type: object
                    properties:
                      id:
                        type: number
                        example: 1
                      first_name:
                        type: string
                        example: BE3
                      last_name:
                        type: string
                        example: Infotiket.in
                      email:
                        type: string
                        example: infotiketin@gmail.com
                      is_verified:
                        type: boolean
                        example: false
                      image_url:
                        type: string
                        example: null
                      role:
                        type: string
                        example: user

        400:
          description: Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Email sudah digunakan sebelumnya!
                  data:
                    type: string
                    example: null

  /auth/masuk:
    post:
      tags:
        - "Autentikasi"
      summary: Login dengan email dan kata sandi
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Login"

      responses:
        200:
          description: Sukses
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Anda telah berhasil masuk!
                  data:
                    type: object
                    properties:
                      id:
                        type: number
                        example: 1
                      first_name:
                        type: string
                        example: BE3
                      last_name:
                        type: string
                        example: Infotiket.in
                      email:
                        type: string
                        example: infotiketin@gmail.com
                      is_verified:
                        type: boolean
                        example: false
                      image_url:
                        type: string
                        example: null
                      role:
                        type: string
                        example: user
                      token:
                        type: string
                        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MywiaWF0IjoxNzE2NzI1ODMyfQ.b19b_5Os8Tbj_ltRoGyOkD8KfxZ-S-12312scwasr23
        400:
          description: Error
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    properties:
                      status:
                        type: boolean
                        example: false
                      message:
                        type: string
                        example: Silahkan verifikasi email Anda. Tautan verifikasi telah dikirim ke email Anda!
                      data:
                        type: string
                        example: null
                  - type: object
                    properties:
                      status:
                        type: boolean
                        example: false
                      message:
                        type: string
                        example: Email atau kata sandi tidak valid!
                      data:
                        type: string
                        example: null

  /auth/verifikasi:
    get:
      tags:
        - "Autentikasi"
      summary: "Verifikasi Email"
      parameters:
        - schema:
            type: string
          name: token
          in: "query"
          description: "Token autentikasi"
          required: true

      responses:
        200:
          description: Sukses
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Verifikasi Sukses
                  data:
                    type: string
                    example: null

        400:
          description: Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Gagal diverifikasi
                  data:
                    type: string
                    example: null

  /auth/halaman-utama:
    get:
      tags:
        - "Autentikasi"
      summary: Selamat datang di Infotiket.in

      responses:
        200:
          description: Sukses
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Selamat Datang di website Infotiket.in!

        400:
          description: Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Tidak ada token!
                  data:
                    type: string
                    example: null
      security:
        - bearerAuth: []

  /auth/lupa-kata-sandi:
    post:
      tags:
        - "Autentikasi"
      summary: Lupa sandi dengan email
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  example: infotiketin@gmail.com

      responses:
        200:
          description: Sukses
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Silahkan periksa email Anda untuk atur ulang kata sandi!
                  data:
                    type: string
                    example: null

        400:
          description: Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Pengguna tidak ditemukan!
                  data:
                    type: string
                    example: null

  /auth/mengatur-ulang-kata-sandi:
    post:
      tags:
        - "Autentikasi"
      summary: "Setel ulang kata sandi"
      parameters:
        - schema:
            type: string
          name: token
          in: "query"
          description: "Token autentikasi"
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                password:
                  type: string
                  example: tes
                confirmPassword:
                  type: string
                  example: tes

      responses:
        200:
          description: Sukses
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Berhasil mengubah kata sandi!
                  data:
                    type: string
                    example: null

        400:
          description: Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Token tidak valid atau sudah kedaluwarsa!
                  data:
                    type: string
                    example: null
  /admin:
    post:
      tags:
        - "Admin"
      summary: Mendaftarkan Admin Baru - Akses hanya admin
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Mendaftar"

      responses:
        201:
          description: Sukses
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Akun berhasil dibuat. Silahkan periksa email Anda untuk verifikasi!
                  data:
                    type: object
                    properties:
                      id:
                        type: number
                        example: 1
                      first_name:
                        type: string
                        example: BE3
                      last_name:
                        type: string
                        example: Infotiket.in
                      email:
                        type: string
                        example: infotiketin@gmail.com
                      is_verified:
                        type: boolean
                        example: false
                      image_url:
                        type: string
                        example: null
                      role:
                        type: string
                        example: user

        400:
          description: Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Email sudah digunakan sebelumnya!
                  data:
                    type: string
                    example: null

  /admin/{id}:
    put:
      tags:
        - "Admin"
      summary: Mengubah menjadi admin - Akses hanya Admin
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            example: 1
          description: ID dari user yang ingin diperoleh
      responses:
        "200":
          description: Berhasil mendapatkan data pengguna
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "x"
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 7
                      first_name:
                        type: string
                        example: "x"
                      last_name:
                        type: string
                        example: "x"
                      email:
                        type: string
                        format: email
                        example: "x@gmail.com"
                      password:
                        type: string
                        example: "x"
                      is_verified:
                        type: boolean
                        example: true
                      image_url:
                        type: string
                        nullable: true
                        example: null
                      google_id:
                        type: string
                        nullable: true
                        example: null
                      email_verification_attempts:
                        type: integer
                        example: 3
                      last_verification_attempt:
                        type: string
                        format: date-time
                        example: "x"
                      role:
                        type: string
                        example: "admin"
      security:
        - bearerAuth: []

  /users:
    get:
      tags:
        - "Admin"
      summary: Mengambil semua pengguna - Akses hanya Admin
      description: Mengambil semua pengguna.
      responses:
        "200":
          description: Berhasil mengambil semua pengguna
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Berhasil mengambil semua pengguna
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          example: 1
                        first_name:
                          type: string
                          example: Infotiketi.n
                        last_name:
                          type: string
                          example: B3
                        email:
                          type: string
                          example: xy@gmail.com
                        password:
                          type: string
                          example: x
                        is_verified:
                          type: boolean
                          example: true
                        image_url:
                          type: string
                          nullable: true
                          example: null
                        google_id:
                          type: string
                          nullable: true
                          example: null
                        email_verification_attempts:
                          type: integer
                          example: 0
                        last_verification_attempt:
                          type: string
                          nullable: true
                          example: null
                        role:
                          type: string
                          example: admi
      security:
        - bearerAuth: []

  /users/{id}:
    get:
      tags:
        - "Admin"
      summary: Mendapatkan pengguna berdasarkan ID - Akses hanya Admin
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            example: 1
          description: ID dari user yang ingin diperoleh
      responses:
        "200":
          description: get user success
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: get user success
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      first_name:
                        type: string
                        example: x
                      last_name:
                        type: string
                        example: x
                      email:
                        type: string
                        example: x@gmail.com
                      password:
                        type: string
                        example: $x
                      is_verified:
                        type: boolean
                        example: true
                      image_url:
                        type: string
                        nullable: true
                        example: null
                      google_id:
                        type: string
                        nullable: true
                        example: null
                      email_verification_attempts:
                        type: integer
                        example: 0
                      last_verification_attempt:
                        type: string
                        nullable: true
                        example: null
                      role:
                        type: string
                        example: admin
      security:
        - bearerAuth: []

    delete:
      tags:
        - "Admin"
      summary: Menghapus pengguna berdasarkan ID - Akses hanya Admin
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            example: 1
          description: ID dari user yang ingin diperoleh
      responses:
        "200":
          description: get user success
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: get user success
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      first_name:
                        type: string
                        example: x
                      last_name:
                        type: string
                        example: x
                      email:
                        type: string
                        example: x@gmail.com
                      password:
                        type: string
                        example: $x
                      is_verified:
                        type: boolean
                        example: true
                      image_url:
                        type: string
                        nullable: true
                        example: null
                      google_id:
                        type: string
                        nullable: true
                        example: null
                      email_verification_attempts:
                        type: integer
                        example: 0
                      last_verification_attempt:
                        type: string
                        nullable: true
                        example: null
                      role:
                        type: string
                        example: admin
      security:
        - bearerAuth: []

  /notifikasi:
    get:
      tags:
        - "Notifikasi"
      summary: Mendapatkan notifikasi
      responses:
        "200":
          description: OK. Notifikasi berhasil ditemukan.
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                    example: 1
                  subject:
                    type: string
                    example: "Pemberitahuan Penting"
                  message:
                    type: string
                    example: "Silakan periksa informasi terbaru."
        "404":
          description: Not Found. Notifikasi tidak ditemukan.
        "500":
          description: Internal Server Error. Terjadi kesalahan pada server.
      security:
        - bearerAuth: []

  /notifikasi/{id}:
    get:
      tags:
        - "Notifikasi"
      summary: Mendapatkan notifikasi berdasarkan ID
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            example: 1
          description: ID dari notifikasi yang ingin diperoleh
      responses:
        "200":
          description: OK. Notifikasi berhasil ditemukan.
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                    example: 1
                  subject:
                    type: string
                    example: "Pemberitahuan Penting"
                  message:
                    type: string
                    example: "Silakan periksa informasi terbaru."
        "404":
          description: Not Found. Notifikasi tidak ditemukan.
        "500":
          description: Internal Server Error. Terjadi kesalahan pada server.
      security:
        - bearerAuth: []

  /profile:
    get:
      tags:
        - "User atau Profil"
      summary: "Dapatkan Semua Profil Pengguna - Akses hanya Admin"
      description: Mengambil semua data profil pengguna
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Berhasil mengambil semua data profil pengguna
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Berhasil mengambil semua data profil pengguna
                  data:
                    type: object
                    properties:
                      users:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                              example: 1
                            first_name:
                              type: string
                              example: John
                            last_name:
                              type: string
                              example: Doe
                            email:
                              type: string
                              example: john.doe@example.com
                            is_verified:
                              type: boolean
                              example: true
                            image_url:
                              type: string
                              nullable: true
                              example: null
                            google_id:
                              type: string
                              nullable: true
                              example: null
                            email_verification_attempts:
                              type: integer
                              example: 0
                            last_verification_attempt:
                              type: string
                              nullable: true
                              example: null
                            role:
                              type: string
                              example: user
        "404":
          description: User tidak ditemukan
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: User tidak ditemukan
                  data:
                    type: object
                    nullable: true
                    example: null
        "500":
          description: Kesalahan Server Internal
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Kesalahan Server Internal
                  err:
                    type: string
                    example: Error message
                  data:
                    type: object
                    nullable: true
                    example: null

  /profil:
    post:
      tags:
        - "User atau Profil"
      summary: Mendaftarkan Pengguna Baru
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Mendaftar"

      responses:
        201:
          description: Sukses
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Akun berhasil dibuat. Silahkan periksa email Anda untuk verifikasi!
                  data:
                    type: object
                    properties:
                      id:
                        type: number
                        example: 1
                      first_name:
                        type: string
                        example: BE3
                      last_name:
                        type: string
                        example: Infotiket.in
                      email:
                        type: string
                        example: infotiketin@gmail.com
                      is_verified:
                        type: boolean
                        example: false
                      image_url:
                        type: string
                        example: null
                      role:
                        type: string
                        example: user

        400:
          description: Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Email sudah digunakan sebelumnya!
                  data:
                    type: string
                    example: null
    get:
      tags:
        - "User atau Profil"
      summary: "Dapatkan Profil pengguna"

      responses:
        200:
          description: Sukses
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Berhasil mengambil data
                  data:
                    type: object
                    properties:
                      id:
                        type: number
                        example: 1
                      first_name:
                        type: string
                        example: BE3
                      last_name:
                        type: string
                        example: Infotiket.in
                      email:
                        type: string
                        example: infotiketin@gmail.com
                      is_verified:
                        type: boolean
                        example: true
                      image_url:
                        type: string
                        example: null
                      role:
                        type: string
                        example: user

        400:
          description: Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Tidak ada token!
                  data:
                    type: string
                    example: null
      security:
        - bearerAuth: []

    put:
      tags:
        - "User atau Profil"
      summary: "Memperbaharui profil pengguna"
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                first_name:
                  type: string
                  example: x
                last_name:
                  type: string
                  example: x
                password:
                  type: string
                  example: x
                confirmPassword:
                  type: string
                  example: x
                gambar_url:
                  type: string
                  format: binary
      responses:
        200:
          description: Sukses
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Berhasil memperbaharui profil pengguna
                  data:
                    type: object
                    properties:
                      id:
                        type: number
                        example: 1
                      first_name:
                        type: string
                        example: BE3
                      last_name:
                        type: string
                        example: Infotiket.in
                      email:
                        type: string
                        example: infotiketin@gmail.com
                      is_verified:
                        type: boolean
                        example: true
                      image_url:
                        type: string
                        example: https://ik.imagekit.io/gis/1716888675180_3hjYL9i1u.jpg
                      role:
                        type: string
                        example: user

        400:
          description: Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Kata sandi tidak cocok!
                  data:
                    type: string
                    example: null

        500:
          description: Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Gagal mengunggah gambar!
                  data:
                    type: string
                    example: null
      security:
        - bearerAuth: []

    delete:
      tags:
        - "User atau Profil"
      summary: Menghapus pengguna profil pengguna - Akses hanya Admin
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: ID of the user to delete
      responses:
        "200":
          description: User profile successfully deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Berhasil menghapus profil
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      first_name:
                        type: string
                        example: x
                      last_name:
                        type: string
                        example: x
                      email:
                        type: string
                        example: x@gmail.com
                      password:
                        type: string
                        example: $x
                      is_verified:
                        type: boolean
                        example: true
                      image_url:
                        type: string
                        nullable: true
                        example: null
                      google_id:
                        type: string
                        nullable: true
                        example: null
                      email_verification_attempts:
                        type: integer
                        example: 0
                      last_verification_attempt:
                        type: string
                        nullable: true
                        example: null
                      role:
                        type: string
                        example: admin
        "404":
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: user not found
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Kesalahan Server Internal
                  err:
                    type: string
                    example: error message

  /flights:
    get:
      tags:
        - "Penerbangan"
      summary: Ambil informasi penerbangan
      description: Ambil informasi penerbangan berdasarkan bandara keberangkatan, bandara kedatangan, tanggal keberangkatan, dan kelas penerbangan.
      parameters:
        - in: query
          name: departureAirport
          schema:
            type: string
          required: true
          description: DPS
        - in: query
          name: arrivalAirport
          schema:
            type: string
          required: true
          description: CGK
        - in: query
          name: departureDate
          schema:
            type: string
            format: date
          required: true
          description: 2024-06-19
        - in: query
          name: returnDate
          schema:
            type: string
            format: date
          required: false
          description: 2024-06-23 "Opsinal"
        - in: query
          name: flightClass
          schema:
            type: string
            enum: [EKONOMI, BISNIS, FIRST]
          required: true
          description: Pilih
      responses:
        "200":
          description: Berhasil mengambil informasi penerbangan
          content:
            application/json:
              schema:
                type: object
                properties:
                  flights:
                    type: array
                    items:
                      type: object
                      properties:
                        flightNumber:
                          type: string
                          description: Nomor penerbangan
                        departureTime:
                          type: string
                          description: Waktu keberangkatan
                        arrivalTime:
                          type: string
                          description: Waktu kedatangan
                        duration:
                          type: string
                          description: Durasi penerbangan
                        price:
                          type: number
                          description: Harga tiket
        "400":
          description: parameter yang diperlukan tidak ada atau format tidak valid
        "500":
          description: Kesalahan server

  /bandara:
    post:
      tags:
        - "Bandara"
      summary: Membuat data Bandara
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name_airport:
                  type: string
                  example: Bandara Internasional Soekarno-Hatta
                city:
                  type: string
                  example: Tangerang
                province:
                  type: string
                  example: Banten
                time_zone:
                  type: string
                  example: Waktu Indonesia Barat
                iata_code:
                  type: string
                  example: CGK
              required:
                - name_airport
                - city
                - province
                - time_zone
                - iata_code
      responses:
        "201":
          description: Airport successfully created
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Berhasil membuat data bandara
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      name_airport:
                        type: string
                        example: Bandara Internasional Soekarno-Hatta
                      city:
                        type: string
                        example: Tangerang
                      province:
                        type: string
                        example: Banten
                      time_zone:
                        type: string
                        example: Waktu Indonesia Barat
                      iata_code:
                        type: string
                        example: CGK
        "400":
          description: Invalid request body
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Request body tidak valid
                  err:
                    type: string
                    example: error message
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Kesalahan Server Internal
                  err:
                    type: string
                    example: error message
    get:
      tags:
        - "Bandara"
      summary: Daftar Semua Data Bandara
      responses:
        201:
          description: sukses
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  message:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        name_airport:
                          type: string
                        city:
                          type: string
                        province:
                          type: string
                        time_zone:
                          type: string
                        iata_code:
                          type: string
                        from_flights:
                          type: array
                        to_flights:
                          type: array

              examples:
                responses:
                  value:
                    status: true
                    message: Berhasil menampilkan semua data Bandara
                    data:
                      - id: 1
                        name_airport: APT Pranoto Airport
                        city: Samarinda
                        province: Kalimantan Timur
                        time_zone: UTC+8
                        iata_code: AAP
                        from_flights: []
                        to_flights: []
                      - id: 2
                        name_airport: Abdul Rachman Saleh
                        city: Malang
                        province: Jawa Timur
                        time_zone: UTC+7
                        iata_code: MLG
                        from_flights: []
                        to_flights: []

        404:
          description: Halaman Tidak Ditemukan 404
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Halaman Tidak Ditemukan 404
                  err:
                    type: string
                    example: Cannot find /api/v1/bandaraa
                  data:
                    type: string
                    example: null

  /bandara/{id}:
    parameters:
      - schema:
          type: integer
        name: id
        in: path
        required: true

    get:
      tags:
        - "Bandara"
      summary: Daftar Data Bandara dengan ID

      responses:
        200:
          description: sukses
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: true
                  message:
                    type: string
                    example: Berhasil menampilkan semua data Bandara
                  data:
                    allOf:
                      - $ref: "#/components/schemas/Bandara"

        404:
          description: Halaman Tidak Ditemukan 404
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Data Airport tidak ditemukan!
                  data:
                    type: string
                    example: null

    put:
      tags:
        - "Bandara"
      summary: Memperbaharui Data Bandara dengan ID
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: ID of the airport to update
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name_airport:
                  type: string
                  example: Nama Bandara Baru
                city:
                  type: string
                  example: Kota Baru
                province:
                  type: string
                  example: Provinsi Baru
                time_zone:
                  type: string
                  example: Waktu Baru
                iata_code:
                  type: string
                  example: Kode Baru
      responses:
        "200":
          description: Airport details successfully updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Berhasil memperbarui data bandara
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      name_airport:
                        type: string
                        example: Nama Bandara Baru
                      city:
                        type: string
                        example: Kota Baru
                      province:
                        type: string
                        example: Provinsi Baru
                      time_zone:
                        type: string
                        example: Waktu Baru
                      iata_code:
                        type: string
                        example: Kode Baru
        "404":
          description: Airport not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Data Airport tidak ditemukan!
                  data:
                    type: string
                    example: null
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Kesalahan Server Internal
                  err:
                    type: string
                    example: error message
                  data:
                    type: string
                    example: null

    delete:
      tags:
        - "Bandara"
      summary: Menghapus Data Bandara dengan ID
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: ID of the airport to delete
      responses:
        "200":
          description: Data bandara berhasil dihapus
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Berhasil menghapus data bandara
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      name_airport:
                        type: string
                        example: Nama Bandara Baru
                      city:
                        type: string
                        example: Kota Baru
                      province:
                        type: string
                        example: Provinsi Baru
                      time_zone:
                        type: string
                        example: Waktu Baru
                      iata_code:
                        type: string
                        example: Kode Baru
        "404":
          description: Airport not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Data Airport tidak ditemukan!
                  data:
                    type: string
                    example: null
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Kesalahan Server Internal
                  err:
                    type: string
                    example: error message
                  data:
                    type: string
                    example: null

  /airlines:
    get:
      tags:
        - "Penerbangan"
      summary: Daftar Semua Data Maskapai
      responses:
        200:
          description: sukses
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: true
                  message:
                    type: string
                    example: Berhasil menampilkan semua data maskapai
                  data:
                    allOf:
                      - $ref: "#/components/schemas/Maskapai"
        404:
          description: Halaman Tidak Ditemukan 404
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Data maskapai tidak ditemukan!
                  data:
                    type: string
                    example: null

  /airlines/{id}:
    parameters:
      - schema:
          type: integer
        name: id
        in: path
        required: true
    get:
      tags:
        - "Penerbangan"
      summary: Data Maskapai by Id
      responses:
        200:
          description: sukses
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: true
                  message:
                    type: string
                    example: Berhasil mendapatkan data maskapai
                  data:
                    allOf:
                      - $ref: "#/components/schemas/Maskapai"
        404:
          description: Halaman Tidak Ditemukan 404
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Data maskapai tidak ditemukan!
                  data:
                    type: string
                    example: null

  /airplanes:
    get:
      tags:
        - "Penerbangan"
      summary: Daftar Semua Data Pesawat
      responses:
        200:
          description: sukses
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: true
                  message:
                    type: string
                    example: Berhasil mendapatkan data pesawat
                  data:
                    allOf:
                      - $ref: "#/components/schemas/Pesawat"
        404:
          description: Halaman Tidak Ditemukan 404
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Data pesawat tidak ditemukan!
                  data:
                    type: string
                    example: null

  /airplanes/{id}:
    parameters:
      - schema:
          type: integer
        name: id
        in: path
        required: true
    get:
      tags:
        - "Penerbangan"
      summary: Data Pesawat by Id
      responses:
        200:
          description: sukses
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: true
                  message:
                    type: string
                    example: Berhasil mendapatkan data pesawat
                  data:
                    allOf:
                      - $ref: "#/components/schemas/Pesawat"
        404:
          description: Halaman Tidak Ditemukan 404
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Data pesawat tidak ditemukan!
                  data:
                    type: string
                    example: null

  /booking:
    post:
      tags:
        - "Pemesanan dan Penumpang"
      summary: Membuat Booking dan Menambahkan Penumpang
      parameters:
        - in: query
          name: schedule_id
          schema:
            type: string
          required: true
          description: ID jadwal penerbangan yang akan dibooking
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                booking_date:
                  type: string
                  format: date
                  example: "2024-07-01"
                total_passenger:
                  type: integer
                  example: 3
                passengers:
                  type: array
                  items:
                    type: object
                    properties:
                      birth_date:
                        type: string
                        format: date
                        example: "1990-01-01"
                      type:
                        type: string
                        enum:
                          - Adult
                          - Child
                          - Infant
                        example: "Adult"
                      id_passport_number:
                        type: string
                        example: "A1234567"
                      citizenship:
                        type: string
                        example: "Indonesia"
                      gender:
                        type: string
                        enum:
                          - Male
                          - Female
                        example: "Male"
                      first_name:
                        type: string
                        example: "John"
                      last_name:
                        type: string
                        example: "Doe"
                      phone_number:
                        type: string
                        example: "08123456789"

      responses:
        "200":
          description: Booking berhasil dibuat
        "400":
          description: Permintaan tidak valid
        "404":
          description: Jadwal penerbangan tidak ditemukan
      security:
        - bearerAuth: []

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
    google_oauth:
      type: oauth2
      flows:
        authorizationCode:
          authorizationUrl: https://expressjs-develop-b4d1.up.railway.app/api/v1/auth/google
          tokenUrl: https://oauth2.googleapis.com/token
  schemas:
    Mendaftar:
      type: object
      properties:
        first_name:
          type: string
          example: BE3
        last_name:
          type: string
          example: Infotiket.in
        email:
          type: string
          example: infotiketin@gmail.com
        password:
          type: string
          example: password123
        confirmPassword:
          type: string
          example: password123
    Login:
      type: object
      properties:
        email:
          type: string
          example: infotiketin@gmail.com
        password:
          type: string
          example: password123
    Bandara:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name_airport:
          type: string
          example: APT Pranoto Airport
        city:
          type: string
          example: Samarinda
        province:
          type: string
          example: Kalimantan Timur
        time_zone:
          type: string
          example: UTC+8
        iata_code:
          type: string
          example: AAP
        from_flights:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
                example: 245
              departure_airport_id:
                type: integer
                example: 1
              arrival_airport_id:
                type: integer
                example: 25
              airline_id:
                type: integer
                example: 1
              departure_time:
                type: string
                example: "10:55"
              arrival_time:
                type: string
                example: "11:25"
              price:
                type: number
                example: 1315385
              flight_number:
                type: string
                example: "QG-461"
              free_baggage:
                type: integer
                example: 20
              cabin_baggage:
                type: integer
                example: 7
              duration_minute:
                type: integer
                example: 90
              class:
                type: string
                example: "ECONOMY"
              is_sunday:
                type: boolean
                example: true
              is_monday:
                type: boolean
                example: false
              is_tuesday:
                type: boolean
                example: false
              is_wednesday:
                type: boolean
                example: false
              is_thursday:
                type: boolean
                example: false
              is_friday:
                type: boolean
                example: false
              is_saturday:
                type: boolean
                example: false
        to_flights:
          type: array
          example: []
          items:
            type: object
            properties:
              id:
                type: integer
                example: 385
              departure_airport_id:
                type: integer
                example: 25
              arrival_airport_id:
                type: integer
                example: 1
              airline_id:
                type: integer
                example: 1
              departure_time:
                type: string
                example: "06:55"
              arrival_time:
                type: string
                example: "09:35"
              price:
                type: number
                example: 1405265
              flight_number:
                type: string
                example: "QG-460"
              free_baggage:
                type: integer
                example: 20
              cabin_baggage:
                type: integer
                example: 7
              duration_minute:
                type: integer
                example: 100
              class:
                type: string
                example: "ECONOMY"
              is_sunday:
                type: boolean
                example: false
              is_monday:
                type: boolean
                example: true
              is_tuesday:
                type: boolean
                example: false
              is_wednesday:
                type: boolean
                example: false
              is_thursday:
                type: boolean
                example: false
              is_friday:
                type: boolean
                example: false
              is_saturday:
                type: boolean
                example: false
    Maskapai:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: Citilink
        short_name:
          type: string
          example: Citilink
        icon_url:
          type: string
          example:
        iata_code:
          type: string
          example: QG
    Pesawat:
      type: object
      properties:
        id:
          type: integer
          example: 1
        model:
          type: string
          example: Airbus A320
        seat_layout:
          type: string
          example: 3-3
        seat_pitch:
          type: integer
          example: 29
        seat_type:
          type: string
          example: STANDARD_LEGROOM
        seat_amount:
          type: integer
          example: 120
        airline_id:
          type: integer
          example: 1

security:
  - google_oauth: []
